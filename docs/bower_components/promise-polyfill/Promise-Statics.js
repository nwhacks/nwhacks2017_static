Promise.all=Promise.all||function(){var a=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(b,c){function d(g,h){try{if(h&&('object'==typeof h||'function'==typeof h)){var j=h.then;if('function'==typeof j)return void j.call(h,function(k){d(g,k)},c)}a[g]=h,0==--e&&b(a)}catch(k){c(k)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},Promise.race=Promise.race||function(a){var b=a;return new Promise(function(c,d){for(var e=0,f=b.length;e<f;e++)b[e].then(c,d)})};