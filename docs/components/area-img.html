<html><head></head><body><dom-module id="area-img">
  <template>
    <style></style>
    <a href="[[href]]" duo$="[[isDuo]]">
      <img id="img" src="[[src]]" class="transparent" natural-height="{{height::load}}" natural-width="{{width::load}}" width="[[computedWidth]]">
      <template is="dom-if" if="[[srcSolid]]">
        <img src="[[srcSolid]]" class="solid" width="[[computedWidth]]">
      </template>
    </a>
  </template>
  <script>Polymer({is:"area-img",properties:{src:{type:String,value:""},href:{type:String,value:""},srcSolid:{type:String,value:""},area:{type:Number,value:43200},isDuo:{type:Boolean,computed:"computeDuo(srcSolid)"}},observers:["updateSize(height, width)"],attached:function(){this.hidden=600>window.innerWidth},visualArea:function(){const a=100,b=100,c=document.createElement("canvas");c.width=a,c.height=b;const d=c.getContext("2d");d.drawImage(this.$.img,0,0,a,b);const e=d.getImageData(0,0,a,b).data;let g=0;for(let i=0;i<b;i++){let j=-1,k=a;for(let l=0;l<a;l++){const m=(i*b+l)*4,n=0==e[m+3];n||(k=l,0>j&&(j=l))}g+=(k-j)*this.width/a}return g*this.height/b},updateSize:function(a,b){const d=Math.sqrt(this.area/(a*b));this.computedHeight=d*a,this.computedWidth=d*b,console.log(this.href,this.area,this.computedHeight*this.computedWidth)},computeDuo:function(a){return 0<a.length}});</script>
</dom-module>
</body></html>