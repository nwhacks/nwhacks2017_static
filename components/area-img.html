<dom-module id="area-img">
  <template>
    <style></style>
    <a href="[[href]]" duo$="[[isDuo]]">
      <img src="[[src]]"
           class="transparent"
           natural-height="{{height::load}}"
           natural-width="{{width::load}}"
           width="[[computedWidth]]">
      <template is="dom-if" if="[[srcSolid]]">
        <img src="[[srcSolid]]"
             class="solid"
             width="[[computedWidth]]">
      </template>
    </a>
  </template>
  <script>
Polymer({
  is: 'area-img',
  properties: {
    src: {
      type: String,
      value: "",
    },
    href: {
      type: String,
      value: "",
    },
    srcSolid: {
      type: String,
      value: "",
    },
    area: {
      type: Number,
      value: 43200,
    },
    isDuo: {
      type: Boolean,
      computed: 'computeDuo(srcSolid)',
    }
  },
  observers: [
    'updateSize(height, width)'
  ],
  attached: function() {
    this.hidden = window.innerWidth < 600;
  },
  updateSize: function(height, width) {
    const scalingFactor = Math.sqrt(this.area/(height*width));
    this.computedHeight = scalingFactor*height;
    this.computedWidth = scalingFactor*width;
    console.log(this.href, this.area, this.computedHeight*this.computedWidth);
  },
  computeDuo: function(srcSolid) {
    return srcSolid.length > 0;
  }
});
  </script>
</dom-module>
