!function(){var j=function(q){var z=new j.Index;return z.pipeline.add(j.trimmer,j.stopWordFilter,j.stemmer),q&&q.call(z,z),z};j.version="0.6.0",j.utils={},j.utils.warn=function(q){return function(z){q.console&&console.warn&&console.warn(z)}}(this),j.utils.asString=function(q){return void 0===q||null===q?"":q.toString()},j.EventEmitter=function(){this.events={}},j.EventEmitter.prototype.addListener=function(){var q=Array.prototype.slice.call(arguments),z=q.pop();if("function"!=typeof z)throw new TypeError("last argument must be a function");q.forEach(function(B){this.hasHandler(B)||(this.events[B]=[]),this.events[B].push(z)},this)},j.EventEmitter.prototype.removeListener=function(q,z){if(this.hasHandler(q)){var A=this.events[q].indexOf(z);this.events[q].splice(A,1),this.events[q].length||delete this.events[q]}},j.EventEmitter.prototype.emit=function(q){if(this.hasHandler(q)){var z=Array.prototype.slice.call(arguments,1);this.events[q].forEach(function(A){A.apply(void 0,z)})}},j.EventEmitter.prototype.hasHandler=function(q){return q in this.events},j.tokenizer=function(q){return arguments.length&&null!=q&&void 0!=q?Array.isArray(q)?q.map(function(z){return j.utils.asString(z).toLowerCase()}):q.toString().trim().toLowerCase().split(j.tokenizer.seperator):[]},j.tokenizer.seperator=/[\s\-]+/,j.Pipeline=function(){this._stack=[]},j.Pipeline.registeredFunctions={},j.Pipeline.registerFunction=function(q,z){z in this.registeredFunctions&&j.utils.warn("Overwriting existing registered function: "+z),q.label=z,j.Pipeline.registeredFunctions[q.label]=q},j.Pipeline.warnIfFunctionNotRegistered=function(q){var z=q.label&&q.label in this.registeredFunctions;z||j.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",q)},j.Pipeline.load=function(q){var z=new j.Pipeline;return q.forEach(function(A){var B=j.Pipeline.registeredFunctions[A];if(!B)throw new Error("Cannot load un-registered function: "+A);z.add(B)}),z},j.Pipeline.prototype.add=function(){var q=Array.prototype.slice.call(arguments);q.forEach(function(z){j.Pipeline.warnIfFunctionNotRegistered(z),this._stack.push(z)},this)},j.Pipeline.prototype.after=function(q,z){j.Pipeline.warnIfFunctionNotRegistered(z);var A=this._stack.indexOf(q);if(-1==A)throw new Error("Cannot find existingFn");A+=1,this._stack.splice(A,0,z)},j.Pipeline.prototype.before=function(q,z){j.Pipeline.warnIfFunctionNotRegistered(z);var A=this._stack.indexOf(q);if(-1==A)throw new Error("Cannot find existingFn");this._stack.splice(A,0,z)},j.Pipeline.prototype.remove=function(q){var z=this._stack.indexOf(q);-1!=z&&this._stack.splice(z,1)},j.Pipeline.prototype.run=function(q){for(var z=[],A=q.length,B=this._stack.length,C=0;A>C;C++){for(var D=q[C],G=0;B>G&&(D=this._stack[G](D,C,q),void 0!==D&&""!==D);G++);void 0!==D&&""!==D&&z.push(D)}return z},j.Pipeline.prototype.reset=function(){this._stack=[]},j.Pipeline.prototype.toJSON=function(){return this._stack.map(function(q){return j.Pipeline.warnIfFunctionNotRegistered(q),q.label})},j.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},j.Vector.Node=function(q,z,A){this.idx=q,this.val=z,this.next=A},j.Vector.prototype.insert=function(q,z){this._magnitude=void 0;var A=this.list;if(!A)return this.list=new j.Vector.Node(q,z,A),this.length++;if(q<A.idx)return this.list=new j.Vector.Node(q,z,A),this.length++;for(var B=A,C=A.next;void 0!=C;){if(q<C.idx)return B.next=new j.Vector.Node(q,z,C),this.length++;B=C,C=C.next}return B.next=new j.Vector.Node(q,z,C),this.length++},j.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var q,z=this.list,A=0;z;)q=z.val,A+=q*q,z=z.next;return this._magnitude=Math.sqrt(A)},j.Vector.prototype.dot=function(q){for(var z=this.list,A=q.list,B=0;z&&A;)z.idx<A.idx?z=z.next:z.idx>A.idx?A=A.next:(B+=z.val*A.val,z=z.next,A=A.next);return B},j.Vector.prototype.similarity=function(q){return this.dot(q)/(this.magnitude()*q.magnitude())},j.SortedSet=function(){this.length=0,this.elements=[]},j.SortedSet.load=function(q){var z=new this;return z.elements=q,z.length=q.length,z},j.SortedSet.prototype.add=function(){var q,z;for(q=0;q<arguments.length;q++)z=arguments[q],~this.indexOf(z)||this.elements.splice(this.locationFor(z),0,z);this.length=this.elements.length},j.SortedSet.prototype.toArray=function(){return this.elements.slice()},j.SortedSet.prototype.map=function(q,z){return this.elements.map(q,z)},j.SortedSet.prototype.forEach=function(q,z){return this.elements.forEach(q,z)},j.SortedSet.prototype.indexOf=function(q){for(var z=0,A=this.elements.length,B=A-z,C=z+Math.floor(B/2),D=this.elements[C];1<B;){if(D===q)return C;q>D&&(z=C),D>q&&(A=C),B=A-z,C=z+Math.floor(B/2),D=this.elements[C]}return D===q?C:-1},j.SortedSet.prototype.locationFor=function(q){for(var z=0,A=this.elements.length,B=A-z,C=z+Math.floor(B/2),D=this.elements[C];1<B;)q>D&&(z=C),D>q&&(A=C),B=A-z,C=z+Math.floor(B/2),D=this.elements[C];return D>q?C:q>D?C+1:void 0},j.SortedSet.prototype.intersect=function(q){for(var z=new j.SortedSet,A=0,B=0,C=this.length,D=q.length,G=this.elements,H=q.elements;;){if(A>C-1||B>D-1)break;G[A]===H[B]?(z.add(G[A]),A++,B++):G[A]<H[B]?A++:G[A]>H[B]&&B++}return z},j.SortedSet.prototype.clone=function(){var q=new j.SortedSet;return q.elements=this.toArray(),q.length=q.elements.length,q},j.SortedSet.prototype.union=function(q){var z,A,B;return this.length>=q.length?(z=this,A=q):(z=q,A=this),B=z.clone(),B.add.apply(B,A.toArray()),B},j.SortedSet.prototype.toJSON=function(){return this.toArray()},j.Index=function(){this._fields=[],this._ref="id",this.pipeline=new j.Pipeline,this.documentStore=new j.Store,this.tokenStore=new j.TokenStore,this.corpusTokens=new j.SortedSet,this.eventEmitter=new j.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},j.Index.prototype.on=function(){var q=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,q)},j.Index.prototype.off=function(q,z){return this.eventEmitter.removeListener(q,z)},j.Index.load=function(q){q.version!==j.version&&j.utils.warn("version mismatch: current "+j.version+" importing "+q.version);var z=new this;return z._fields=q.fields,z._ref=q.ref,z.documentStore=j.Store.load(q.documentStore),z.tokenStore=j.TokenStore.load(q.tokenStore),z.corpusTokens=j.SortedSet.load(q.corpusTokens),z.pipeline=j.Pipeline.load(q.pipeline),z},j.Index.prototype.field=function(q,z){var z=z||{},A={name:q,boost:z.boost||1};return this._fields.push(A),this},j.Index.prototype.ref=function(q){return this._ref=q,this},j.Index.prototype.add=function(q,z){var A={},B=new j.SortedSet,C=q[this._ref],z=!(void 0!==z)||z;this._fields.forEach(function(I){var J=this.pipeline.run(j.tokenizer(q[I.name]));A[I.name]=J,j.SortedSet.prototype.add.apply(B,J)},this),this.documentStore.set(C,B),j.SortedSet.prototype.add.apply(this.corpusTokens,B.toArray());for(var D=0;D<B.length;D++){var G=B.elements[D],H=this._fields.reduce(function(I,J){var K=A[J.name].length;if(!K)return I;var L=A[J.name].filter(function(M){return M===G}).length;return I+L/K*J.boost},0);this.tokenStore.add(G,{ref:C,tf:H})}z&&this.eventEmitter.emit("add",q,this)},j.Index.prototype.remove=function(q,z){var A=q[this._ref],z=!(void 0!==z)||z;if(this.documentStore.has(A)){var B=this.documentStore.get(A);this.documentStore.remove(A),B.forEach(function(C){this.tokenStore.remove(C,A)},this),z&&this.eventEmitter.emit("remove",q,this)}},j.Index.prototype.update=function(q,z){var z=!(void 0!==z)||z;this.remove(q,!1),this.add(q,!1),z&&this.eventEmitter.emit("update",q,this)},j.Index.prototype.idf=function(q){var z="@"+q;if(Object.prototype.hasOwnProperty.call(this._idfCache,z))return this._idfCache[z];var A=this.tokenStore.count(q),B=1;return 0<A&&(B=1+Math.log(this.documentStore.length/A)),this._idfCache[z]=B},j.Index.prototype.search=function(q){var z=this.pipeline.run(j.tokenizer(q)),A=new j.Vector,B=[],C=this._fields.reduce(function(H,I){return H+I.boost},0),D=z.some(function(H){return this.tokenStore.has(H)},this);if(!D)return[];z.forEach(function(H,I,J){var K=1/J.length*this._fields.length*C,L=this,M=this.tokenStore.expand(H).reduce(function(Q,R){var U=L.corpusTokens.indexOf(R),V=L.idf(R),W=1,X=new j.SortedSet;if(R!==H){var Y=Math.max(3,R.length-H.length);W=1/Math.log(Y)}-1<U&&A.insert(U,K*V*W);for(var Z=L.tokenStore.get(R),$=Object.keys(Z),aa=$.length,ba=0;aa>ba;ba++)X.add(Z[$[ba]].ref);return Q.union(X)},new j.SortedSet);B.push(M)},this);var G=B.reduce(function(H,I){return H.intersect(I)});return G.map(function(H){return{ref:H,score:A.similarity(this.documentVector(H))}},this).sort(function(H,I){return I.score-H.score})},j.Index.prototype.documentVector=function(q){for(var z=this.documentStore.get(q),A=z.length,B=new j.Vector,C=0;A>C;C++){var D=z.elements[C],G=this.tokenStore.get(D)[q].tf,H=this.idf(D);B.insert(this.corpusTokens.indexOf(D),G*H)}return B},j.Index.prototype.toJSON=function(){return{version:j.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},j.Index.prototype.use=function(q){var z=Array.prototype.slice.call(arguments,1);z.unshift(this),q.apply(this,z)},j.Store=function(){this.store={},this.length=0},j.Store.load=function(q){var z=new this;return z.length=q.length,z.store=Object.keys(q.store).reduce(function(A,B){return A[B]=j.SortedSet.load(q.store[B]),A},{}),z},j.Store.prototype.set=function(q,z){this.has(q)||this.length++,this.store[q]=z},j.Store.prototype.get=function(q){return this.store[q]},j.Store.prototype.has=function(q){return q in this.store},j.Store.prototype.remove=function(q){this.has(q)&&(delete this.store[q],this.length--)},j.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},j.stemmer=function(){var q={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},z={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},B="[aeiouy]",C="[^aeiou]"+"[^aeiouy]*",D=B+"[aeiou]*",K=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,L=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,M=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,Q=/^([^aeiou][^aeiouy]*)?[aeiouy]/,R=/^(.+?)(ss|i)es$/,U=/^(.+?)([^s])s$/,V=/^(.+?)eed$/,W=/^(.+?)(ed|ing)$/,X=/.$/,Y=/(at|bl|iz)$/,Z=/([^aeiouylsz])\1$/,$=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,aa=/^(.+?[^aeiou])y$/,ba=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,ca=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,da=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,ea=/^(.+?)(s|t)(ion)$/,fa=/^(.+?)e$/,ga=/ll$/,ha=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/;return function(ja){var ka,la,ma,na,oa,pa,qa;if(3>ja.length)return ja;if(ma=ja.substr(0,1),"y"==ma&&(ja=ma.toUpperCase()+ja.substr(1)),na=R,oa=U,na.test(ja)?ja=ja.replace(na,"$1$2"):oa.test(ja)&&(ja=ja.replace(oa,"$1$2")),na=V,oa=W,na.test(ja)){var ra=na.exec(ja);na=K,na.test(ra[1])&&(na=X,ja=ja.replace(na,""))}else if(oa.test(ja)){var ra=oa.exec(ja);ka=ra[1],oa=Q,oa.test(ka)&&(ja=ka,oa=Y,pa=Z,qa=$,oa.test(ja)?ja+="e":pa.test(ja)?(na=X,ja=ja.replace(na,"")):qa.test(ja)&&(ja+="e"))}if(na=aa,na.test(ja)){var ra=na.exec(ja);ka=ra[1],ja=ka+"i"}if(na=ba,na.test(ja)){var ra=na.exec(ja);ka=ra[1],la=ra[2],na=K,na.test(ka)&&(ja=ka+q[la])}if(na=ca,na.test(ja)){var ra=na.exec(ja);ka=ra[1],la=ra[2],na=K,na.test(ka)&&(ja=ka+z[la])}if(na=da,oa=ea,na.test(ja)){var ra=na.exec(ja);ka=ra[1],na=L,na.test(ka)&&(ja=ka)}else if(oa.test(ja)){var ra=oa.exec(ja);ka=ra[1]+ra[2],oa=L,oa.test(ka)&&(ja=ka)}if(na=fa,na.test(ja)){var ra=na.exec(ja);ka=ra[1],na=L,oa=M,pa=ha,(na.test(ka)||oa.test(ka)&&!pa.test(ka))&&(ja=ka)}return na=ga,oa=L,na.test(ja)&&oa.test(ja)&&(na=X,ja=ja.replace(na,"")),"y"==ma&&(ja=ma.toLowerCase()+ja.substr(1)),ja}}(),j.Pipeline.registerFunction(j.stemmer,"stemmer"),j.generateStopWordFilter=function(q){var z=q.reduce(function(A,B){return A[B]=B,A},{});return function(A){return A&&z[A]!==A?A:void 0}},j.stopWordFilter=j.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),j.Pipeline.registerFunction(j.stopWordFilter,"stopWordFilter"),j.trimmer=function(q){return q.replace(/^\W+/,"").replace(/\W+$/,"")},j.Pipeline.registerFunction(j.trimmer,"trimmer"),j.TokenStore=function(){this.root={docs:{}},this.length=0},j.TokenStore.load=function(q){var z=new this;return z.root=q.root,z.length=q.length,z},j.TokenStore.prototype.add=function(q,z,A){var A=A||this.root,B=q.charAt(0),C=q.slice(1);return B in A||(A[B]={docs:{}}),0===C.length?(A[B].docs[z.ref]=z,void(this.length+=1)):this.add(C,z,A[B])},j.TokenStore.prototype.has=function(q){if(!q)return!1;for(var z=this.root,A=0;A<q.length;A++){if(!z[q.charAt(A)])return!1;z=z[q.charAt(A)]}return!0},j.TokenStore.prototype.getNode=function(q){if(!q)return{};for(var z=this.root,A=0;A<q.length;A++){if(!z[q.charAt(A)])return{};z=z[q.charAt(A)]}return z},j.TokenStore.prototype.get=function(q,z){return this.getNode(q,z).docs||{}},j.TokenStore.prototype.count=function(q,z){return Object.keys(this.get(q,z)).length},j.TokenStore.prototype.remove=function(q,z){if(q){for(var A=this.root,B=0;B<q.length;B++){if(!(q.charAt(B)in A))return;A=A[q.charAt(B)]}delete A.docs[z]}},j.TokenStore.prototype.expand=function(q,z){var A=this.getNode(q),B=A.docs||{},z=z||[];return Object.keys(B).length&&z.push(q),Object.keys(A).forEach(function(C){"docs"!==C&&z.concat(this.expand(q+C,z))},this),z},j.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(q,z){"function"==typeof define&&define.amd?define(z):"object"==typeof exports?module.exports=z():q.lunr=z()}(this,function(){return j})}();